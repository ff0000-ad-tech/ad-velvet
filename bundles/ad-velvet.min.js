!function(e){function t(o){if(n[o])return n[o].exports;var r=n[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var n={};t.m=e,t.c=n,t.d=function(e,n,o){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:o})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=1)}([,function(e,t,n){"use strict";function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e){for(var t in e)V[t]=e[t]}function l(){try{return new XMLHttpRequest}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(e){}return console.warn("XMLHttpRequest not supported"),null}function c(e){var t=e.lastIndexOf("."),n=e.lastIndexOf("/")+1;return n>t&&(t=void 0),e.substring(n,t)}function s(e){e=e||"";var t=e.indexOf("?");t>-1&&(e=e.substr(0,t));var n=e.match(/[^\\]*\.(\w+)$/),o=e.match(/image\/(jpeg|jpg|png)/);return n?n[1]:o?o[1]:"unknown"}function u(e){if("string"==typeof e)return e;var t="";for(var n in e)console.log("      prop =",n),t+=n+"="+e[n]+"&";return t.substr(0,t.length-1)}function d(e){var t=e.search(/^\/\//)>-1;if(e.search(/^http/)>-1||t){var n=window.location.href.search(/^https/)>-1||adParams.forceHttps,o=n?"https://":"http://";if(t&&(e=e.replace(/^\/\//,o)),e.search(/.*edgecastcdn/)>-1){e=o+(n?"ne1."+e.match(/w(a|p)c/i)[0]+".":e.match(/w(a|p)c\.[a-z0-9]*\./i)[0])+"edgecastcdn"+e.replace(/.*edgecastcdn/,"")}else if(e.search(/.*paramount\.com/)>-1){var r=n?"paramountdlds-a.akamaihd.net":"downloads.paramount.com";e=o+r+e.replace(/.*paramount\.com/,"")}else e=e.search(/espn\.go\.com/)>-1||e.search(/secure\.espncdn\.com/)>-1?"https://secure.espncdn.com"+e.replace(/^.*\.com/,""):e.replace(/^https?\:\/\//i,o)}return e}function p(e){var t=[],n=[0];for(var o in e)t.push(o),n.push(e[o]+(n[n.length-1]||0));for(var r=100*Math.random().toFixed(2),a=0;a<n.length-1;a++){if(f(r,n[a],n[a+1]))return t[a]}}function f(e,t,n){var o=Math.min(t,n);return e<=Math.max(t,n)&&e>=o}function h(e){var t={},n=window.location.href.split("?");if(n.length>1){var o=n[1].split("&");for(var r in o){var a=o[r].split("=");2==a.length&&(t[a[0]]=decodeURIComponent(a[1]))}}return e?t[e]:Object.keys(t).length>0?t:void 0}function v(e,t){ee[e]||(ee[e]=[]);for(var n=ee[e],o=0,r=n.length;o<r;o++)if(n[o]===t)return;n.push(t)}function m(e,t){var n=ee[e];if(n)for(var o=0,r=n.length;o<r;o++)if(n[o]===t){n.splice(o,1);break}}function y(e){ee[e]&&ee[e].map(function(e){e()})}function g(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};console.log("Velvet.init()"),(void 0)(t);var n=document.referrer.match(/qa\.velvet\.tech/);n&&console.log("\tis on qa.velvet.tech"),b()?(console.log("\tPreview requested"),te=n?K:B):(console.log("\tLive requested"),te=isQa?G:J),ne=e,te+=ne.client+"/"+ne.locale+"/",console.log("\tbase url:",te);var o=h("addata");return o&&(console.log("\t\tAd Data set via query:",o),ne.addata=o),new Promise(function(e,t){oe=e,console.log("\tVelvet.init() Promise"),ne.addata?T():w()})}function b(){var e=window.location.href;return void 0!=e&&null!=e&&("production"!==h("velvet")&&!!(e.match(/^file/)||e.match(/manta\.joyent\.com/)||e.match(/ff0000\.com/)||e.match(/adprodtest/)||e.match(/client\-projects\.com/)||e.match(/[0-9]+\.[0-9]+\.[0-9]+\.[0-9]+:[0-9]+/)))}function w(){new X(te+ne.segment,{name:"segmentLoader",fileType:"json",onComplete:O,onFail:q}).load()}function T(){new X(te+ne.addata,{name:"velvetAdDataLoader",fileType:"json",onComplete:S,onFail:q}).load()}function O(e){var t=JSON.parse(e.dataRaw);console.log("Velvet segment Json:\n",t),adParams.defaultTimezone=t.tz,adParams.defaultTimezone&&console.log("\tdefaultTimezone:",adParams.defaultTimezone);var n=t.timeblocks,o=(void 0)();console.log("\tnow:",o);var r=void 0;for(r=0;r<n.length;r++){var a=n[r].time;if(console.log("\t\t>",new Date(a)),o<a)break}var i=r-1;if(i<0)return void q();console.log("\tselected timeblock:",n[i]);var l=n[i].ad_rotation;if(ne.addata=p(l),console.log("\tselected ad slug:",ne.addata),"USE_STATIC"===ne.addata)return void y(Q);T()}function S(e){console.log("Velvet.handleAdDataLoadComplete()"),re=JSON.parse(e.dataRaw),console.log("Velvet Raw addata:\n",re),oe(),y(Y)}function q(){y($)}function j(e){console.log("Velvet.capture.addSchedule()");for(var t=e.getDates(!0),n=0;n<t.length;n++){var o=t[n],r=o.date,a={date:r.toISO(),tz:r.outputTimezone.abbr[0],ltz:adParams.defaultTimezone,label:o.standardKey};ae.push(a)}}function C(e){if(console.log("Velvet.capture.addCustomData()"),"object"!==(void 0===e?"undefined":k(e)))throw new Error("Cannot use a primative as data, must be an Object passed to .addCustomData()");ae.push(e)}function _(){0===ae.length&&ae.push({foo:"bar"}),console.log("Velvet.capture.dispatchData()\n\t",ae),x("setParameters",ae)}function P(){console.log("Velvet.capture.adComplete()"),x("adComplete")}function A(){console.log("Velvet.capture.adStart()"),x("adStart")}function x(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};"function"==typeof window.callExternal&&window.callExternal({event:e,data:t})}function E(){var e="string"==typeof arguments[0],t=arguments[e?0:1],n=e?re:arguments[0];le=!!arguments[e?1:2],ce=[];var o=t.replace(/\.value(\.|)/g,".").replace(/\.$/,"");de=o.split("."),ue=void 0,se=de.pop();for(var r="",a=0;a<de.length;a++)a>0&&(r+="."),r+=de[a],isNaN(de[a])&&(r+=".value");return pe=de.length>0,pe&&(de=r.split("."),ue=de.shift(),de.push(se)),M(n),1==ce.length?(ce=ce[0])&&"object"==(void 0===ce?"undefined":k(ce))&&0==Object.keys(ce).length&&(ce=void 0):0==ce.length&&(ce=void 0),ce}function M(e){switch(Object.prototype.toString.call(e)){case"[object Object]":D(e);break;case"[object Array]":L(e)}}function D(e){for(var t in e)F(e,t)}function L(e){if(pe||isNaN(se))for(var t=0;t<e.length;t++)D(e[t]);else ce.push(e[se])}function F(e,t){if(t!=se||pe){if(t==ue){var n=R(de,e[t]);return void(n&&ce.push(N(n)))}}else ce.push(N(e[t]));le&&M(e[t])}function N(e){return e.hasOwnProperty("value")?e.value:e}function R(e,t){for(var n,o=t||{},r=0;o&&(n=e[r]);r++)o=n in o?o[n]:void 0;return o}Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"init",function(){return fe}),n.d(t,"isPreviewLocation",function(){return he}),n.d(t,"addEventListener",function(){return ve}),n.d(t,"removeEventListener",function(){return me}),n.d(t,"events",function(){return ye}),n.d(t,"capture",function(){return ge}),n.d(t,"get",function(){return be});var k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},z={english:{MONTHS_FULL:["January","February","March","April","May","June","July","August","September","October","November","December"],MONTHS_ABRV:["jan","feb","mar","apr","may","jun","jul","aug","sep","oct","nov","dec"],MONTHS_EXCP:["","","","","","","","","sept","","",""],WEEKDAYS_FULL:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],WEEKDAYS_ABRV:["sun","mon","tue","wed","thu","fri","sat"],WEEKDAYS_EXCP1:["","","tues","wednes","thur","",""],WEEKDAYS_EXCP2:["","","","","thurs","",""],ST:"st",ND:"nd",RD:"rd",TH:"th",OF:"of",TOMORROW:"Tomorrow",TODAY:"Today",TONIGHT:"Tonight",NOW:"Live Now",PAST:"Past"}},V={};i(z);var I=function(){function e(t){a(this,e),this.superclass=t}return e.prototype.with=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce(function(e,t){return t(e)},this.superclass)},e}(),H=function(e){return function(e){function t(){for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];a(this,t);var l=o(this,e.call.apply(e,[this].concat(r))),c=arguments&&arguments.length>1?arguments[1]:arguments[0]||{},s=l;return s.onComplete=c.onComplete||function(){},s.onFail=c.onFail||function(){},s.onProgress=c.onProgress||function(){},s.name=c.name||"",s.scope=c.scope||s,s.dataRaw,s.cacheBuster=c.cacheBuster||!1,s._failCalled=!1,l}return r(t,e),t.prototype._handleFail=function(){var e=this;e._failCalled||(e._failCalled=!0,e.onFail.call(e.scope,e),console.log('Loader "'+e.name+'" Fail:',e.url))},t}(e)},U=function(e){return function(e){function t(){for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];a(this,t);var l=o(this,e.call.apply(e,[this].concat(r))),u=arguments&&arguments.length>1?arguments[1]:arguments[0]||{},p=l;return p.url=d(arguments[0]||""),u.platformGetUrl&&(p.platformGetUrl=u.platformGetUrl,p.url=u.platformGetUrl(p.url)),p.fileName=void 0===u.id?c(p.url):u.id,p.fileType=u.fileType||s(p.url),l}return r(t,e),t}(e)},W=function e(){a(this,e)},X=function(e){function t(){for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];a(this,t);var l=o(this,e.call.apply(e,[this].concat(r))),c=arguments&&arguments.length>1?arguments[1]:arguments[0]||{},s=l;return s.method=(c.method||"get").toLowerCase(),s.query=c.query||null,s.responseType=c.responseType||null,l}return r(t,e),t.prototype.load=function(){var e=this,t=null,n="post"===e.method;e.req=l(),void 0!=e.responseType&&(e.req.responseType=e.responseType);var o=e.url;switch(e.query&&(t=u(e.query),n||(o+="?"+t,t=null)),e.cacheBuster&&(o+=e.query&&!n?"&":"?",o+="cb="+(new Date).getTime()),e.req.onreadystatechange=e._handleStateChange.bind(e),e.req.open(e.method,o,!0),e.fileType){case"xml":e.req.overrideMimeType&&e.req.overrideMimeType("text/xml");break;case"json":e.req.overrideMimeType&&e.req.overrideMimeType("application/json");break;case"fba":case"bin":case"binary":e.responseType=e.req.responseType="arraybuffer"}"post"===e.method&&e.req.setRequestHeader("Content-type","application/x-www-form-urlencoded"),e.req.send(t)},t.prototype._handleStateChange=function(e){var t=this;switch(t.req.readyState){case 3:200==this.req.status&&(t.dataRaw=t.responseType?t.req.response:t.req.responseText,t._handleProgress(t));break;case 4:200==t.req.status?(t.dataRaw=t.responseType?t.req.response:t.req.responseText,t._handleComplete(t)):t._handleFail({target:e})}},t.prototype._handleProgress=function(){var e=this;e.onProgress.call(e.scope,e)},t.prototype._handleComplete=function(){var e=this;e.onComplete.call(e.scope,e)},t}(function(e){return new I(e)}(W).with(H,U)),J="https://json.ff0000-cdn.net/",B="https://preview.ff0000-cdn.net/preview/",G="https://qa.ff0000-cdn.net/",K="https://qa.velvet.tech/preview/",Y="velvetInit",$="velvetFail",Q="velvetStatic",Z=Object.freeze({INIT:Y,FAIL:$,STATIC:Q}),ee={},te=void 0,ne=void 0,oe=void 0,re={},ae=[],ie=Object.freeze({addSchedule:j,addCustomData:C,dispatchData:_,adComplete:P,adStart:A}),le=void 0,ce=[],se=void 0,ue=void 0,de=void 0,pe=void 0,fe=g,he=b,ve=v,me=m,ye=Z,ge=ie,be=E}]);